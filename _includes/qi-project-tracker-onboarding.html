<!-- QI Project Tracker Onboarding Modal -->
<div class="onboarding-overlay" id="qiProjectTrackerOnboarding">
    <div class="onboarding-modal large">
        <button class="onboarding-close" onclick="closeOnboarding('qiProjectTrackerOnboarding')" aria-label="Close">&times;</button>

        <div class="onboarding-content">
            <!-- Progress Dots -->
            <div class="onboarding-progress">
                <span class="onboarding-progress-dot active"></span>
                <span class="onboarding-progress-dot"></span>
                <span class="onboarding-progress-dot"></span>
                <span class="onboarding-progress-dot"></span>
            </div>

            <!-- Step 1: Welcome -->
            <div class="onboarding-step active">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 3rem; height: 3rem; color: var(--color-primary);">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
                    </svg>
                    <h2 style="margin: 0;">Welcome to QI Project Tracker!</h2>
                </div>

                <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">
                    Create and track quality improvement projects with custom data collection, real-time analysis, and powerful visualizations.
                </p>

                <div class="onboarding-feature-grid">
                    <div class="onboarding-feature">
                        <div class="onboarding-feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 2.5rem; height: 2.5rem;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </div>
                        <h4>Fully Customizable</h4>
                        <p>Define your own variables, data types, and tracking methods</p>
                    </div>
                    <div class="onboarding-feature">
                        <div class="onboarding-feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 2.5rem; height: 2.5rem;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
                            </svg>
                        </div>
                        <h4>Visual Analytics</h4>
                        <p>Automatic charts and statistical summaries as you collect data</p>
                    </div>
                    <div class="onboarding-feature">
                        <div class="onboarding-feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 2.5rem; height: 2.5rem;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0112 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5" />
                            </svg>
                        </div>
                        <h4>Multiple Projects</h4>
                        <p>Track unlimited QI projects simultaneously with separate data</p>
                    </div>
                </div>

                <div class="onboarding-actions">
                    <button class="onboarding-btn onboarding-btn-primary" onclick="nextOnboardingStep('qiProjectTrackerOnboarding')">
                        Get Started
                    </button>
                    <button class="onboarding-btn onboarding-btn-text" onclick="completeOnboarding('qiProjectTrackerOnboarding')">
                        Skip tour
                    </button>
                </div>
            </div>

            <!-- Step 2: Creating Projects -->
            <div class="onboarding-step">
                <h2>Create Your First QI Project</h2>
                <p>Setting up a project takes just 3 simple steps:</p>

                <div style="display: grid; gap: 1.5rem; margin: 2rem 0;">
                    <div style="display: flex; gap: 1.5rem; align-items: start;">
                        <div style="flex-shrink: 0; width: 3rem; height: 3rem; background: var(--color-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.25rem;">1</div>
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0;">Name Your Project</h4>
                            <p style="margin: 0; color: #7f8c8d;">Give your project a descriptive name (e.g., "Hand Hygiene Compliance", "Door-to-Doc Time")</p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1.5rem; align-items: start;">
                        <div style="flex-shrink: 0; width: 3rem; height: 3rem; background: var(--color-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.25rem;">2</div>
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0;">Define Your Variables</h4>
                            <p style="margin: 0; color: #7f8c8d;">Add custom variables to track. Choose from types like text, number, yes/no, date, and more</p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1.5rem; align-items: start;">
                        <div style="flex-shrink: 0; width: 3rem; height: 3rem; background: var(--color-primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.25rem;">3</div>
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0;">Start Collecting Data</h4>
                            <p style="margin: 0; color: #7f8c8d;">Begin entering observations and watch your analytics update in real-time</p>
                        </div>
                    </div>
                </div>

                <div style="background: #e8f4f8; padding: 1.5rem; border-radius: 12px; border: 2px solid var(--color-primary);">
                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 1.75rem; height: 1.75rem; color: var(--color-primary);">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
                        </svg>
                        <p style="margin: 0; font-weight: 600; color: var(--color-primary);">
                            Pro Tip: Variable Types
                        </p>
                    </div>
                    <p style="margin: 0;">
                        Think about what you want to measure before creating variables. Use <strong>numbers</strong> for measurements, <strong>yes/no</strong> for compliance checks, <strong>text</strong> for notes, and <strong>dates</strong> for time tracking.
                    </p>
                </div>

                <div class="onboarding-actions">
                    <button class="onboarding-btn onboarding-btn-secondary" onclick="prevOnboardingStep('qiProjectTrackerOnboarding')">
                        Back
                    </button>
                    <button class="onboarding-btn onboarding-btn-primary" onclick="nextOnboardingStep('qiProjectTrackerOnboarding')">
                        Continue
                    </button>
                </div>
            </div>

            <!-- Step 3: Collecting & Analyzing Data -->
            <div class="onboarding-step">
                <h2>Collect Data & View Analytics</h2>
                <p>Once your project is set up, you'll have access to three powerful tabs:</p>

                <div style="display: grid; gap: 1rem; margin: 2rem 0;">
                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 2rem; height: 2rem; color: var(--color-primary);">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <h4 style="margin: 0;">Collect Data Tab</h4>
                        </div>
                        <ul style="margin: 0; padding-left: 1.5rem;">
                            <li>Enter new data points quickly with custom form</li>
                            <li>"Repeat Last Entry" button for rapid data collection</li>
                            <li>All fields match your defined variables</li>
                        </ul>
                    </div>

                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 2rem; height: 2rem; color: var(--color-primary);">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />
                            </svg>
                            <h4 style="margin: 0;">View Data Tab</h4>
                        </div>
                        <ul style="margin: 0; padding-left: 1.5rem;">
                            <li>See all collected entries in table format</li>
                            <li>Edit or delete individual entries</li>
                            <li>Export data to CSV for external analysis</li>
                        </ul>
                    </div>

                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 2rem; height: 2rem; color: var(--color-primary);">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9l3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605" />
                            </svg>
                            <h4 style="margin: 0;">Analysis & Charts Tab</h4>
                        </div>
                        <ul style="margin: 0; padding-left: 1.5rem;">
                            <li>Automatic statistical summaries (mean, median, percentages)</li>
                            <li>Interactive charts and visualizations</li>
                            <li>Trend analysis over time</li>
                        </ul>
                    </div>
                </div>

                <div class="onboarding-actions">
                    <button class="onboarding-btn onboarding-btn-secondary" onclick="prevOnboardingStep('qiProjectTrackerOnboarding')">
                        Back
                    </button>
                    <button class="onboarding-btn onboarding-btn-primary" onclick="nextOnboardingStep('qiProjectTrackerOnboarding')">
                        Continue
                    </button>
                </div>
            </div>

            <!-- Step 4: Data Management -->
            <div class="onboarding-step">
                <h2>Data Management & Best Practices</h2>

                <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 2rem; height: 2rem; color: #f39c12;">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                        </svg>
                        <h4 style="margin: 0; color: #856404;">Important: Local Storage</h4>
                    </div>
                    <p style="margin: 0; color: #856404;">
                        All project data is stored in your browser. <strong>Export your data regularly</strong> to avoid losing it if you clear cache or switch devices.
                    </p>
                </div>

                <h4 style="margin-bottom: 1rem;">Tips for Successful QI Projects:</h4>
                <ul style="font-size: 1.05rem; margin-bottom: 2rem;">
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem; color: var(--color-primary);">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <strong>Start simple:</strong> Begin with 3-5 key variables, add more later if needed
                    </li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem; color: var(--color-primary);">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <strong>Consistent collection:</strong> Set a regular schedule for data entry
                    </li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem; color: var(--color-primary);">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <strong>Weekly exports:</strong> Download your data regularly as backup
                    </li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem; color: var(--color-primary);">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <strong>Use "Repeat Last Entry":</strong> Great for bulk data collection sessions
                    </li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 1.25rem; height: 1.25rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem; color: var(--color-primary);">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <strong>Check analytics frequently:</strong> Monitor trends and identify patterns early
                    </li>
                </ul>

                <div style="text-align: center; background: linear-gradient(135deg, var(--color-primary) 0%, #0066aa 100%); color: white; padding: 2rem; border-radius: 12px;">
                    <h3 style="margin-top: 0; color: white;">Ready to Start Your QI Journey?</h3>
                    <p style="margin-bottom: 0; opacity: 0.9;">Click "Create New Project" and begin tracking your quality improvements today!</p>
                </div>

                <div class="onboarding-actions">
                    <button class="onboarding-btn onboarding-btn-secondary" onclick="prevOnboardingStep('qiProjectTrackerOnboarding')">
                        Back
                    </button>
                    <button class="onboarding-btn onboarding-btn-primary" onclick="completeOnboarding('qiProjectTrackerOnboarding')">
                        Create My First Project
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Initialize QI project tracker onboarding when page loads
document.addEventListener('DOMContentLoaded', function() {
    OnboardingSystem.init('qiProjectTrackerOnboarding', {
        totalSteps: 4,
        localStorageKey: 'ppe_qi_project_tracker_completed',
        showOnce: true,
        delay: 800, // Show after 800ms
        onComplete: function() {
            console.log('QI Project Tracker onboarding completed');
        }
    });
});
</script>
